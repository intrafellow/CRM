# üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ Backend

```
backend/
‚îú‚îÄ‚îÄ üìÑ README.md                          # –û—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ üìÑ QUICKSTART.md                      # –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
‚îú‚îÄ‚îÄ üìÑ EXAMPLES.md                        # –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API
‚îú‚îÄ‚îÄ üìÑ PROJECT_STRUCTURE.md               # –≠—Ç–æ—Ç —Ñ–∞–π–ª
‚îú‚îÄ‚îÄ üìÑ requirements.txt                   # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ üìÑ .gitignore                         # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã
‚îú‚îÄ‚îÄ üìÑ CRM_API.postman_collection.json    # –ö–æ–ª–ª–µ–∫—Ü–∏—è Postman
‚îú‚îÄ‚îÄ üìÑ test_api.sh                        # –°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ üìÑ run.py                             # –°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞
‚îÇ
‚îî‚îÄ‚îÄ app/                                  # –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ üìÑ __init__.py
    ‚îú‚îÄ‚îÄ üìÑ main.py                        # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ FastAPI
    ‚îú‚îÄ‚îÄ üìÑ config.py                      # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
    ‚îú‚îÄ‚îÄ üìÑ database.py                    # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ë–î –∏ —Å–µ—Å—Å–∏–π
    ‚îú‚îÄ‚îÄ üìÑ dependencies.py                # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è)
    ‚îú‚îÄ‚îÄ üìÑ init_data.py                   # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
    ‚îÇ
    ‚îú‚îÄ‚îÄ models/                           # SQLAlchemy –º–æ–¥–µ–ª–∏ (–ë–î)
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ user.py                    # –ú–æ–¥–µ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ contact.py                 # –ú–æ–¥–µ–ª—å –∫–æ–Ω—Ç–∞–∫—Ç–∞
    ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ deal.py                    # –ú–æ–¥–µ–ª—å —Å–¥–µ–ª–∫–∏
    ‚îÇ
    ‚îú‚îÄ‚îÄ schemas/                          # Pydantic —Å—Ö–µ–º—ã (–≤–∞–ª–∏–¥–∞—Ü–∏—è)
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ user.py                    # –°—Ö–µ–º—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ contact.py                 # –°—Ö–µ–º—ã –∫–æ–Ω—Ç–∞–∫—Ç–∞
    ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ deal.py                    # –°—Ö–µ–º—ã —Å–¥–µ–ª–∫–∏
    ‚îÇ
    ‚îú‚îÄ‚îÄ routers/                          # API endpoints
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ __init__.py
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ auth.py                    # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ contacts.py                # CRUD –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤
    ‚îÇ   ‚îú‚îÄ‚îÄ üìÑ deals.py                   # CRUD —Å–¥–µ–ª–æ–∫
    ‚îÇ   ‚îî‚îÄ‚îÄ üìÑ users.py                   # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
    ‚îÇ
    ‚îî‚îÄ‚îÄ services/                         # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞
        ‚îú‚îÄ‚îÄ üìÑ __init__.py
        ‚îú‚îÄ‚îÄ üìÑ auth.py                    # –°–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
        ‚îî‚îÄ‚îÄ üìÑ permissions.py             # –°–µ—Ä–≤–∏—Å –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
```

---

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª–µ–π

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã

#### `main.py`
- –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ä–æ—É—Ç–µ—Ä–æ–≤
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ CORS
- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- Lifecycle events (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î)

#### `config.py`
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã JWT
- –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ë–î
- CORS origins
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Pydantic Settings

#### `database.py`
- –°–æ–∑–¥–∞–Ω–∏–µ engine SQLAlchemy
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Å—Å–∏–π
- Dependency –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ë–î —Å–µ—Å—Å–∏–∏
- –§—É–Ω–∫—Ü–∏—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–∞–±–ª–∏—Ü

#### `dependencies.py`
- `get_current_user()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ JWT
- `get_current_active_user()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `get_current_admin()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –∞–¥–º–∏–Ω–∞
- Security schemes –¥–ª—è Swagger

#### `init_data.py`
- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –ë–î
- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ú–æ–∂–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –æ—Ç–¥–µ–ª—å–Ω–æ

---

### Models (–ú–æ–¥–µ–ª–∏ –ë–î)

#### `models/user.py`
**–ü–æ–ª—è:**
- `id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `email` - Email (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `name` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `hashed_password` - –•–µ—à –ø–∞—Ä–æ–ª—è
- `role` - –†–æ–ª—å (admin/employee)
- `verified` - –°—Ç–∞—Ç—É—Å –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### `models/contact.py`
**–ü–æ–ª—è:**
- `id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `contact` - –ò–º—è –∫–æ–Ω—Ç–∞–∫—Ç–∞
- `owner_id` - ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ (FK –Ω–∞ users)
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

#### `models/deal.py`
**–ü–æ–ª—è:**
- `id` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
- `owner_id` - ID –≤–ª–∞–¥–µ–ª—å—Ü–∞ (FK –Ω–∞ users)
- `data` - JSON —Å –¥–∞–Ω–Ω—ã–º–∏ —Å–¥–µ–ª–∫–∏ (–≥–∏–±–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
- `created_at` - –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è
- `updated_at` - –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –°–¥–µ–ª–∫–∏ —Ö—Ä–∞–Ω—è—Ç –¥–∞–Ω–Ω—ã–µ –≤ JSON –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –≥–∏–±–∫–æ—Å—Ç–∏.

---

### Schemas (Pydantic —Å—Ö–µ–º—ã)

#### `schemas/user.py`
- `UserBase` - –ë–∞–∑–æ–≤—ã–µ –ø–æ–ª—è
- `UserCreate` - –°–æ–∑–¥–∞–Ω–∏–µ (+ password)
- `UserUpdate` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è)
- `User` - –û—Ç–≤–µ—Ç API
- `UserInDB` - –ú–æ–¥–µ–ª—å —Å —Ö–µ—à–µ–º –ø–∞—Ä–æ–ª—è
- `Token` - JWT —Ç–æ–∫–µ–Ω + user
- `TokenData` - –î–∞–Ω–Ω—ã–µ –∏–∑ —Ç–æ–∫–µ–Ω–∞

#### `schemas/contact.py`
- `ContactBase` - –ë–∞–∑–æ–≤—ã–µ –ø–æ–ª—è
- `ContactCreate` - –°–æ–∑–¥–∞–Ω–∏–µ
- `ContactUpdate` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `Contact` - –û—Ç–≤–µ—Ç API
- `ContactImport` - –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç

#### `schemas/deal.py`
- `DealBase` - –ë–∞–∑–æ–≤—ã–µ –ø–æ–ª—è
- `DealCreate` - –°–æ–∑–¥–∞–Ω–∏–µ
- `DealUpdate` - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
- `Deal` - –û—Ç–≤–µ—Ç API
- `DealImport` - –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç

---

### Routers (API endpoints)

#### `routers/auth.py`
**Endpoints:**
- `POST /api/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
- `POST /api/auth/login` - –í—Ö–æ–¥
- `GET /api/auth/me` - –¢–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
- `POST /api/auth/logout` - –í—ã—Ö–æ–¥

#### `routers/contacts.py`
**Endpoints:**
- `GET /api/contacts` - –°–ø–∏—Å–æ–∫ (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- `GET /api/contacts/{id}` - –ü–æ–ª—É—á–∏—Ç—å –ø–æ ID
- `POST /api/contacts` - –°–æ–∑–¥–∞—Ç—å
- `PUT /api/contacts/{id}` - –û–±–Ω–æ–≤–∏—Ç—å
- `DELETE /api/contacts/{id}` - –£–¥–∞–ª–∏—Ç—å
- `POST /api/contacts/import` - –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç

**–§–∏–ª—å—Ç—Ä—ã:**
- `skip` - –ü–∞–≥–∏–Ω–∞—Ü–∏—è (offset)
- `limit` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
- `owner_id` - –§–∏–ª—å—Ç—Ä –ø–æ –≤–ª–∞–¥–µ–ª—å—Ü—É
- `search` - –ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏

#### `routers/deals.py`
**Endpoints:**
- `GET /api/deals` - –°–ø–∏—Å–æ–∫ (—Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏)
- `GET /api/deals/{id}` - –ü–æ–ª—É—á–∏—Ç—å –ø–æ ID
- `POST /api/deals` - –°–æ–∑–¥–∞—Ç—å
- `PUT /api/deals/{id}` - –û–±–Ω–æ–≤–∏—Ç—å
- `DELETE /api/deals/{id}` - –£–¥–∞–ª–∏—Ç—å
- `POST /api/deals/import` - –ú–∞—Å—Å–æ–≤—ã–π –∏–º–ø–æ—Ä—Ç

**–§–∏–ª—å—Ç—Ä—ã:**
- `skip` - –ü–∞–≥–∏–Ω–∞—Ü–∏—è (offset)
- `limit` - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π
- `owner_id` - –§–∏–ª—å—Ç—Ä –ø–æ –≤–ª–∞–¥–µ–ª—å—Ü—É

#### `routers/users.py`
**Endpoints (—Ç–æ–ª—å–∫–æ –¥–ª—è –∞–¥–º–∏–Ω–æ–≤):**
- `GET /api/users` - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `GET /api/users/{id}` - –ü–æ–ª—É—á–∏—Ç—å –ø–æ ID
- `PUT /api/users/{id}` - –û–±–Ω–æ–≤–∏—Ç—å
- `DELETE /api/users/{id}` - –£–¥–∞–ª–∏—Ç—å

---

### Services (–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞)

#### `services/auth.py`
**–ú–µ—Ç–æ–¥—ã:**
- `verify_password()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
- `get_password_hash()` - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª—è
- `create_access_token()` - –°–æ–∑–¥–∞–Ω–∏–µ JWT
- `decode_token()` - –î–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ JWT

**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:**
- `passlib` - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ bcrypt
- `python-jose` - JWT —Ç–æ–∫–µ–Ω—ã

#### `services/permissions.py`
**–ú–µ—Ç–æ–¥—ã:**
- `can_edit_resource()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- `can_delete_resource()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ
- `is_admin()` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–∏ –∞–¥–º–∏–Ω–∞

**–õ–æ–≥–∏–∫–∞:**
- –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –≤—Å—ë
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –º–æ–∂–µ—Ç —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Ä–µ—Å—É—Ä—Å—ã

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### JWT –¢–æ–∫–µ–Ω—ã
- –ê–ª–≥–æ—Ä–∏—Ç–º: HS256
- –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è: 7 –¥–Ω–µ–π (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- –•—Ä–∞–Ω–µ–Ω–∏–µ: Bearer —Ç–æ–∫–µ–Ω –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ Authorization

### –ü–∞—Ä–æ–ª–∏
- –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ: bcrypt
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞: 6 —Å–∏–º–≤–æ–ª–æ–≤
- –•—Ä–∞–Ω—è—Ç—Å—è —Ç–æ–ª—å–∫–æ —Ö–µ—à–∏

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- –†–æ–ª–∏: admin, employee
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Ä–æ—É—Ç–µ—Ä–æ–≤
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ —Ä–µ—Å—É—Ä—Å–∞

---

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### SQLite (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
- –§–∞–π–ª: `crm.db`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### PostgreSQL (–¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞)
–í `.env` –∏–∑–º–µ–Ω–∏—Ç–µ:
```env
DATABASE_URL=postgresql://user:password@localhost/crm_db
```

### –ú–∏–≥—Ä–∞—Ü–∏–∏
–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Alembic:
```bash
alembic init alembic
alembic revision --autogenerate -m "Initial migration"
alembic upgrade head
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Swagger UI
- URL: http://localhost:8000/docs
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É Authorize

### Postman
- –ò–º–ø–æ—Ä—Ç: `CRM_API.postman_collection.json`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞
- –ì–æ—Ç–æ–≤—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤

### curl
- –°–∫—Ä–∏–ø—Ç: `test_api.sh`
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö endpoints
- –ü—Ä–∏–º–µ—Ä—ã –≤ `EXAMPLES.md`

---

## üì¶ –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ
- **FastAPI** - Web framework
- **Uvicorn** - ASGI server
- **SQLAlchemy** - ORM
- **Pydantic** - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **python-jose** - JWT —Ç–æ–∫–µ–Ω—ã
- **passlib** - –•–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ
- **python-multipart** - –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- **python-dateutil** - –†–∞–±–æ—Ç–∞ —Å –¥–∞—Ç–∞–º–∏
- **pydantic-settings** - –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

---

## üöÄ –î–µ–ø–ª–æ–π

### –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
```bash
python run.py
```

### Production (Uvicorn)
```bash
uvicorn app.main:app --host 0.0.0.0 --port 8000 --workers 4
```

### Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
```dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt
COPY . .
CMD ["uvicorn", "app.main:app", "--host", "0.0.0.0", "--port", "8000"]
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ `.env` —Ñ–∞–π–ª:
```env
DATABASE_URL=postgresql://user:password@db:5432/crm
SECRET_KEY=–≤–∞—à-—Å—É–ø–µ—Ä-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á
CORS_ORIGINS=["https://yourdomain.com"]
```

---

## üìà –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ
- –ù–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- Load balancer (Nginx, Traefik)
- Shared database

### –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–µ
- –£–≤–µ–ª–∏—á–µ–Ω–∏–µ workers: `--workers 8`
- –ë–æ–ª—å—à–µ RAM –¥–ª—è –ë–î
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

### –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- Redis –¥–ª—è —Å–µ—Å—Å–∏–π
- –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ETags –¥–ª—è HTTP –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è

---

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–∏—è

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ endpoint

1. **–°–æ–∑–¥–∞–π—Ç–µ –º–æ–¥–µ–ª—å** –≤ `app/models/`
2. **–°–æ–∑–¥–∞–π—Ç–µ —Å—Ö–µ–º—ã** –≤ `app/schemas/`
3. **–°–æ–∑–¥–∞–π—Ç–µ —Ä–æ—É—Ç–µ—Ä** –≤ `app/routers/`
4. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–æ—É—Ç–µ—Ä** –≤ `app/main.py`

### –ü—Ä–∏–º–µ—Ä:
```python
# app/routers/new_endpoint.py
from fastapi import APIRouter

router = APIRouter(prefix="/api/new", tags=["New"])

@router.get("")
async def get_items():
    return {"items": []}

# app/main.py
from app.routers import new_endpoint
app.include_router(new_endpoint.router)
```

---

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
```python
import logging
logger = logging.getLogger(__name__)
logger.info("Debug message")
```

### Debug —Ä–µ–∂–∏–º
–í `.env`:
```env
DEBUG=True
```

### SQL –ª–æ–≥–∏
–í `database.py`:
```python
engine = create_engine(
    settings.database_url,
    echo=True  # –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤—Å–µ SQL –∑–∞–ø—Ä–æ—Å—ã
)
```

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è –∏ –∞–≤—Ç–æ—Ä—Å—Ç–≤–æ

–ü—Ä–æ–µ–∫—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è CRM —Å–∏—Å—Ç–µ–º—ã.

